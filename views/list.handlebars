<div class="row">
  <div class="col s12 m12">
    <h2>Shopping List</h2>
    <div class="input-field col s6">
      <input id="addItem" type="text" class="validate">
      <label for="addItem">Add an Item</label>
      <button class="btn waves-effect waves-light" type="submit" id="additembutton" name="action">Add
        <i class="material-icons right">send</i>
      </button>
    </div>
    <div class = "col s6">
    <p>Already have something? Click an item to remove it from the list.</p>
    <ul id="shoppingListItems">
    </ul>
    </div>
    
    <button id="clearbtn" type="button">Clear List</button>
  </div>
</div>
<script type="text/javascript">
  window.onload = function(){
    var storagevariable = window.localStorage.getItem("ingredients");
    console.log(storagevariable);
    /*var itemlistcount = 0;
    var listitems = $("<li>");
    listitems.attr("id", "item-" + itemlistcount);
    listitems.append(" " + newItem + "</li>");
    var xButton = $("<button>");
    xButton.attr("data-addItem", itemlistcount);
    xButton.addClass("checkbox");
    xButton.append("X");
    listitems = listitems.prepend(xButton);*/
    var storagearray = storagevariable.split(",");
    for(var i = 0; i < storagearray.length; i++){
      $("#shoppingListItems").append("<li class='item'>"+storagearray[i]+"</li>");
    }
    $(document).on("click",".item", function(){
      console.log($(this).text());
      for (var i =0; i < storagearray.length; i++){
        if (storagearray[i] === $(this).text()){
          storagearray.splice(i,1);
        }
      }
      localStorage.removeItem(this);
      this.remove();
      window.localStorage.setItem("ingredients", storagearray.join(","));
    })
    $("#clearbtn").on("click", function(){
      localStorage.clear();
      window.location.reload();
    });
    $("#additembutton").on("click", function(){
      var newItem = $("#addItem").val().trim();
      storagearray.push(newItem);
      window.localStorage.setItem("ingredients", storagearray.join(","));
      //add some sort of validation maybe to prevent duplicates? idk
      $("#shoppingListItems").append("<li class='item'>"+newItem+"</li>");

    })
  }
  

</script>